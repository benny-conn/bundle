FROM golang
WORKDIR /bundle/repo
COPY . .
ENV DATABASE_PORT=8040
ENV REPO_PORT=8060
ENV WEB_PORT=8080
ENV API_PORT=8020
ENV API_HOST=api
ENV WEB_HOST=web
ENV REPO_HOST=repo
ENV DATABASE_HOST=db
ARG awsid
ARG awssecret
ENV AWS_ACCESS_KEY_ID=$awsid
ENV AWS_SECRET_ACCESS_KEY=$awssecret
RUN go install cmd/repo/repo.go
EXPOSE 8060
CMD ["repo"]